---
modules:
  mystrom:
    headers:
      X-Dummy: my-test-header
    metrics:
    - name: mystrom_power
      path: '{ .power }'
      help: The current power consumed by devices attached to the switch
      labels:
        mystrom: power
    - name: mystrom_relay
      path: '{ .relay }'
      help: The current state of the relay (wether or not the relay is currently turned on)
      labels:
        mystrom: relay
    - name: mystrom_temperature
      path: '{ .temperature }'
      help: The currently measured temperature by the switch. (Might initially be wrong, but will automatically correct itself over the span of a few hours)
      labels:
        mystrom: temperature
    - name: mystrom_Ws
      path: '{ .Ws }'
      help: The Ws field represents the average power value since the last call. It is the energy consumed divided by the time elapsed since the last call. Energy = Ws ∙ ∆T. For continous consumption measurements (Ws values with timestamp stored in DB) Total Energy = ∑Ws ∙ (Tcurrent - Tbegin).
      labels:
        mystrom: Ws
  nut_http:
    headers:
      X-Dummy: my-test-header
    metrics:
    - name: nut_http_status
      path: '{ .ups.statusnum }'
      help: Status Number. 1=Online, 2=Online&Charging, 3=On Battery, 4=Low Battery, 5=Shutdown Load
      labels:
        beeper_status: '{ .ups.beeper.status }'
        device_model: '{ .device.model }'
    - name: nut_http_runtime
      path: '{ .battery.runtime }'
      help: Battery runtime
    - name: nut_http_battery_voltage
      path: '{ .battery.voltage }'
      help: Battery battery_voltage
    - name: nut_http_charge
      path: '{ .battery.charge }'
      help: Battery charge
    - name: nut_http_input_voltage
      path: '{ .input.voltage }'
      help: Battery input_voltage
    - name: nut_http_load
      path: '{ .ups.load }'
      help: Battery load
    - name: nut_http_realpower_nominal
      path: '{ .ups.realpower.nominal }'
      help: Nominal Power
  truenas:
    headers:
      X-Dummy: my-test-header
    metrics:
    - name: truenas_current_test_sdg
      path: '{ [0].current_test.progress }'
      help: exists only if a test is running, shows progress in % 

