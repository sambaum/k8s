resources:
  - ../../../base/core/cert-manager/
patches:
  - target:
      kind: ClusterIssuer
      name: letsencrypt-staging
    patch: |-
      - op: replace
        path: /spec/acme/email
        value: samuel.baumgartner@gmail.com
      - op: replace
        path: /spec/acme/solvers/0/dns01/cloudflare/email
        value: samuel.baumgartner@gmail.com
  - target:
      kind: ClusterIssuer
      name: letsencrypt-production
    patch: |-
      - op: replace
        path: /spec/acme/email
        value: samuel.baumgartner@gmail.com
      - op: replace
        path: /spec/acme/solvers/0/dns01/cloudflare/email
        value: samuel.baumgartner@gmail.com
  - target:
      kind: SealedSecret
      name: cloudflare-api-token-secret
    patch: |-
      - op: replace
        path: /spec/encryptedData/api-token
        value: AgBhJTCdH7Zj+Gn5YNxmbpZCTRhdhEb2XHID7bUyhoa78Ibg+QVBAAVvqp8dzf9GLRGJicPTksBJM1EweH8LCR2CEOC4m5mCaCagev7In8lycaoggYEf7HT70wtppybVBDQ8BlplcnzjUs2rRRM2vSFEEbK+f5YEeKlWVj4HyW9wGTebK+YVRJUYkrfgmhmAvfp4nWEebB7iw+yPtuORZ2S+MzozyJK7DrAGslWYroVQOFdiV5sJNsxLzSwm/Iz+3hhyrMWB5JKCmZOEGbJ8FFhOFzrFLbJB1z3ZojHRiFeMdnPz/8FiPg1JvPFGIAbog+t58eWlF8Ptx0KXj8rUaqW+seGakBSfJ+o51UjOmCZE/KRVWJGceiNh3U6UIuuaSVu+oP2+KBjtJuoSRBxTe5KynbQQ6aPJsP6/g1l25p9+NmefhPHxPkP+CyfLOyjudsD4IgLauWEXulp4Xa7fg8MRC0u3SlDzYfhLXHqJQ2fbnYodFlZ4oEe0PeUjwS4MmCqXeVA2VOxxR25CAvmvN06Iomo1vLX/1S1zwFeT3+zGc0kwzzmGg6vsfawdHARgXQu4mvcqf4CQCpMizboW+DYL68EGpSbnDfwSDDnTI/5iYGW0ucZDsAzmOphke+m49CeL9SCjGaPqFRcaDL/o8i/QVnpfxowJZI6jY8d3n6UoB/7flZbd3cn+mH2W1+q/LXTO0jnJTtREwxSDDJw9KKRCBSWGDZcNBsb3muil+iZkdTSRrX14

# kubectl create secret generic cloudflare-api-token-secret -n cert-manager --dry-run=client --from-literal=api-token=mysecretvalue -o yaml | \
# kubeseal \
#   --controller-name=sealed-secrets-controller \
#   --controller-namespace=flux-system \
#   --format yaml > letsencrypt-secret-temp.yaml
