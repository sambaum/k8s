resources:
  - ../../../base/core/cert-manager/
patches:
  - target:
      kind: ClusterIssuer
      name: letsencrypt-staging
    patch: |-
      - op: replace
        path: /spec/acme/email
        value: samuel.baumgartner@gmail.com
      - op: replace
        path: /spec/acme/solvers/0/dns01/cloudflare/email
        value: samuel.baumgartner@gmail.com
  - target:
      kind: ClusterIssuer
      name: letsencrypt-production
    patch: |-
      - op: replace
        path: /spec/acme/email
        value: samuel.baumgartner@gmail.com
      - op: replace
        path: /spec/acme/solvers/0/dns01/cloudflare/email
        value: samuel.baumgartner@gmail.com
  - target:
      kind: SealedSecret
      name: cloudflare-api-token-secret
    patch: |-
      - op: replace
        path: /spec/encryptedData/api-token
        value: AgB3YbFZkik5jP8P7FohgTf71820Zno5CElhrxf1xZPGCbmQUQDErOtTlopa3VB6YgCdk3OSIn3pXH72bBSblTwU9oGYjELhR+/3YJM5lAZw/XIEp88SqFKqxTCIFqdj2hjAFHXVFmaDEWoOfxRhXT8HzLRPw2jLrPx5W4Bv/Q7RBCxJFwX3+CStwgDZgeHVKVoeAhlkRJ6EMNa1hwHM9yW2umsbwAv5PlFyheGo6mM6CC9VFoiLeHzfwstXyuwjiYCb626pk2bOB7OMLT2IZqzEGzwOkOzCRSInTKajTJtritZMBbbGfv6cq1mKhbOMJIMt03T3OD55ilbnjm08mSdH+7HRlK0j42gbFEIphQiAkeTmXYEtCGswCz8mNwgfUegokOqepGbbdlS2Pmesyu4l4tjbVHgdjQ/dqp3C5qyyPTA7XaF7KU7SEHH+bYr/EAKEn0vK66uBp+UGdCJ5ZSq0IR3+FLtOlQknPc0kMrNJyY+d+PTshuF7pD3ObeeBCVs8D+8pfjnzGHeLaMsMWCkwPKtFLxZoNVB2jO0RLdnOSEBxZjqS51Wt/IlERzj9ns6h7DY42+ptHHrU7r8JvbbyoVibQDHhtOB9hbtIrM8oXtecrX+HFN9DAirRXb0Tmy2Mzj3H/jgaf+2zreLcN0bOr3vNa5/tiQZpoiipf7uI6tIImptelrsUBmpKNUGARNLdaAwNp6vrpYg8RWJFbAdiYg6tY2SAFQfY1cEfIDFf8k/ef6OZUPSY

# kubectl create secret generic cloudflare-api-token-secret -n cert-manager --dry-run=client --from-literal=api-token=mysecretvalue -o yaml | \
# kubeseal \
#   --controller-name=sealed-secrets-controller \
#   --controller-namespace=flux-system \
#   --format yaml > letsencrypt-secret-temp.yaml
