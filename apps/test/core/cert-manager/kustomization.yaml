resources:
  - ../../../base/core/cert-manager/
patches:
  - target:
      kind: ClusterIssuer
      name: letsencrypt-staging
    patch: |-
      - op: replace
        path: /spec/acme/email
        value: samuel.baumgartner@gmail.com
      - op: replace
        path: /spec/acme/solvers/0/dns01/cloudflare/email
        value: samuel.baumgartner@gmail.com
  - target:
      kind: ClusterIssuer
      name: letsencrypt-production
    patch: |-
      - op: replace
        path: /spec/acme/email
        value: samuel.baumgartner@gmail.com
      - op: replace
        path: /spec/acme/solvers/0/dns01/cloudflare/email
        value: samuel.baumgartner@gmail.com

# kubectl create secret generic cloudflare-api-token-secret -n cert-manager --dry-run=client --from-literal=api-token=mysecretvalue -o yaml | \
# kubeseal \
#   --controller-name=sealed-secrets-controller \
#   --controller-namespace=flux-system \
#   --format yaml > letsencrypt-secret-temp.yaml
