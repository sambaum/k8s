{
  "$schema": "https://docs.renovatebot.com/renovate-schema.json",
  "extends": [
    "config:base"
  ],
  "schedule": [
    "* * * * *"
  ],
  "kubernetes": {
    "fileMatch": [
      "\\.yaml$"
    ],
    "ignorePaths": [
      "wip/**"
    ]
  },
  "flux": {
    "fileMatch": [
      "\\.yaml$"
    ],
    "ignorePaths": [
      "wip/**"
    ]
  },
  "minor": {
    "automerge": true
  },
  "patch": {
    "automerge": true
  },
  "pin": {
    "automerge": true
  },
  "automergeType": "branch",
  "ignoreTests": true,
  "packageRules": [
    {
      "matchPackageNames": [
        "linuxserver/prowlarr"
      ],
      "versioning": "regex:^(?<major>\\d+)\\.(?<minor>\\d+)\\.(?<patch>\\d{1,3})?$" // prevent stuff like 1.8.1259
    },
    {
      "matchPackageNames": [
        "linuxserver/healthchecks"
      ],
      "versioning": "regex:^(?<major>\\d+)\\.(?<minor>\\d+)\\.(?<patch>\\d{1,3})?$" // prevent stuff like 2.8.20230411
    },
    {
      "matchPackageNames": [
        "tuetenk0pp/sharelatex-full"
      ],
      "allowedVersions": "/^3\\.1\\.[0-9]+(\\.[0-9]+)?$/" // Stick to 3.1, because higher versions use too much idle CPU.
    },
    {
      "matchPackageNames": [
        "linuxserver/emby"
      ],
      "allowedVersions": "/^((4|5)\\.\\d{1,2}\\.\\d{1,2})$/" // prevent notifications about false 7.0.19 release
    },
    {
      "matchPackageNames": [
        "linuxserver/transmission"
      ],
      "versioning": "regex:^(?<major>\\d{1,2})\\.(?<minor>\\d{1,2})\\.(?<patch>\\d{1,2})?$" // prevent stuff like 2021.11.18
    },
    {
      "matchPackageNames": [
        "influxdb"
      ],
      "matchFileNames": [
        "**/influxdbv1.yaml"
      ],
      "versioning": "regex:^1\\.(?<minor>\\d+)\\.(?<patch>\\d+)?$" // Stick to Version 1
    },
    {
      "matchPackageNames": [
        "mongo"
      ],
      "matchFileNames": [
        "**/overleaf.yaml"
      ],
      "versioning": "regex:^4\\.(?<minor>\\d+)\\.(?<patch>\\d+)?$" // Stick to Version 4
    },
    {
      "matchPackageNames": [
        "mongo"
      ],
      "matchFileNames": [
        "**/wekan.yaml"
      ],
      "versioning": "regex:^5\\.(?<minor>\\d+)\\.(?<patch>\\d+)?$" // Stick to Version 5
    },
    {
      "matchPackageNames": [
        "wekan"
      ],
      "matchFileNames": [
        "**/wekan.yaml"
      ],
      "versioning": "regex:^v(?<major>\\d{1,2})\\.(?<minor>\\d{1,2})(?<patch>\\.\\d{1,2})?"
    },
    {
      "matchPackageNames": [
        "redis"
      ],
      "matchFileNames": [
        "**/overleaf.yaml"
      ],
      "versioning": "regex:^5\\.(?<minor>\\d+)\\.(?<patch>\\d+)?$" // Stick to Version 5
    },
    {
      "matchPackageNames": [
        "mariadb"
      ],
      "matchFileNames": [
        "**/lychee.yaml"
      ],
      "versioning": "regex:^10\\.(?<minor>\\d+)\\.(?<patch>\\d+)?$" // Stick to Version 10
    },
    {
      "matchPackageNames": [
        "postgres"
      ],
      "matchFileNames": [
        "**/paperless.yaml"
      ],
      "versioning": "regex:^13\\.(?<minor>\\d+)\\.(?<patch>\\d+)?$" // Stick to Version 13
    },
    {
      "matchPackageNames": [
        "metallb",
        "ingress-nginx"
      ],
      "minor": {
        "automerge": false
      }
    }
  ]
}
